{% extends 'base.html' %}

{% block title %}Recomendaciones{% endblock %}
{% load custom_filters %}

{% block content %}
<h2 class="fw-bold">RECOMENDACIONES</h2>

<div class="intro-description" style="text-align: justify;">
  <p>
    La vista de Recomendaciones te permite obtener sugerencias personalizadas sobre cÃ³mo mejorar las condiciones del suelo para un cultivo especÃ­fico. Tras ingresar el nÃºmero de registros que deseas consultar, la plataforma analizarÃ¡ los datos y generarÃ¡ recomendaciones tÃ©cnicas basadas en el estado actual del suelo. Esta vista proporciona detalles sobre el cultivo sugerido, el estado del suelo y recomendaciones prÃ¡cticas para mejorar los nutrientes y caracterÃ­sticas del terreno.
  </p>
</div>


<!-- SecciÃ³n para seleccionar la cantidad de registros -->
<form method="post" action="{% url 'recomendaciones' %}">
    {% csrf_token %}
    <div class="mb-4">
        <label for="cantidad_registros" class="form-label">Â¿Con cuÃ¡ntos de los Ãºltimos registros quieres hacer la consulta?</label>
        <input type="number" id="cantidad_registros" name="cantidad_registros" class="form-control" min="1" max="30" placeholder="Ingresa el nÃºmero de registros, preferiblemente entre 1 y 20 registros" required>
        <button type="submit" class="btn btn-primary mt-2">Seleccionar</button>
    </div>
</form>

<div class="record-box">
  {% for r in resultados %}
    <div style="margin-bottom: 30px; border: 1px solid #ccc; padding: 15px;">
        <h3>ðŸ“… MediciÃ³n del {{ r.fecha|iso_to_local_datetime:"America/Mexico_City"}}</h3>
        <p>ðŸŒ± <strong>Cultivo sugerido:</strong> {{ r.cultivo }}</p>

        <h4>ðŸ“Š Estado del suelo:</h4>
        <ul>
            {% for estado in r.estado %}
                <li>{{ estado }}</li>
            {% endfor %}
        </ul>

        <h4>ðŸ§ª Recomendaciones tÃ©cnicas:</h4>
        <ol>
            {% for recomendacion in r.recomendaciones %}
                <li>{{ recomendacion }}</li>
            {% endfor %}
        </ol>
    </div>
  {% endfor %}
</div>

<div class="mt-4">
  <button class="btn footer-btn">GENERAR RECOMENDACIONES</button>
</div>
{% endblock %}
