{% extends 'base.html' %}

{% block title %}TeRra-Smart - Mediciones{% endblock %}

{% block content %}
<h2 class="fw-bold">MEDICIONES</h2>

<form class="record-box w-100" method="post" action="{% url 'mediciones' %}" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="row g-3">
    <div class="col-md-4">
      <label class="form-label">pH agua:suelo 2,5:1,0</label>
      <input type="text" name="ph" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Materia orgánica (MO) %</label>
      <input type="text" name="materiaOrganica" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Fósforo (P) Bray II mg/kg</label>
      <input type="text" name="fosforo" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Azufre (S) Fosfato monocalcico mg/kg</label>
      <input type="text" name="azufre" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Calcio (Ca) intercambiable cmol(+)/kg</label>
      <input type="text" name="calcio" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Magnesio (Mg) intercambiable cmol(+)/kg</label>
      <input type="text" name="magnesio" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Potasio (K) intercambiable cmol(+)/kg</label>
      <input type="text" name="potasio" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Sodio (Na) intercambiable cmol(+)/kg</label>
      <input type="text" name="sodio" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Hierro (Fe) disponible Olsen mg/kg</label>
      <input type="text" name="hierro" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Cobre (Cu) disponible mg/kg</label>
      <input type="text" name="cobre" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Manganeso (Mn) disponible Olsen mg/kg</label>
      <input type="text" name="manganeso" class="form-control">
    </div>
    <div class="col-md-4">
      <label class="form-label">Zinc (Zn) disponible Olsen mg/kg</label>
      <input type="text" name="zinc" class="form-control">
    </div>
  </div>

  <div class="mt-4">
    <button type="submit" name="accion" value="subir_manual" class="btn footer-btn mb-3">SUBIR DATOS</button>
  </div>

  <div class="mb-3">
    <label for="archivo_mediciones" class="form-label">Subir archivo de mediciones</label>
    <input type="file" class="form-control" id="archivo_mediciones" name="archivo_mediciones" accept=".csv,.xlsx,.xls">
    <small class="form-text text-muted">Formatos aceptados: CSV, Excel</small>
  </div>

  <button type="submit" name="accion" value="subir_archivo" class="btn footer-btn mb-2">PROCESAR ARCHIVO</button>
</form>

{% if messages %}
  <div class="messages mt-3">
    {% for message in messages %}
      <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
